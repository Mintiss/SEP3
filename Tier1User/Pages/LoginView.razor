@page "/login"
@using Microsoft.AspNetCore.Components.Authorization
@using Tier1User.Data
@inject NavigationManager goTo
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject Model model
@inject IJSRuntime jsRuntime


<h3>Login</h3>

<div class="login">

    <div class="content px-4">
        @if (isValid == false)
        {
            <div class="alert alert-danger" role="alert" @on>
                Wrong username or password
            </div>
        }
        @if (empty)
        {
            <div class="alert alert-danger" role="alert" @on>
                Invalid information!
            </div>
        }

        <h5>Enter Your Username</h5>
        <input placeholder="Username" type="email" @bind="emailInput" />
        <h5>Enter Your Password</h5>
        <input placeholder="Password" type="password" @bind="passwordInput" />

        <button @onclick="checkData">Submit</button>
    </div>

</div>




@code {

    string emailInput = string.Empty;
    string passwordInput = string.Empty;
    bool isValid = true;
    bool empty;


    public void checkData()
    {
        if (emailInput.Length != 0)
        {
            if (passwordInput.Length != 0)
            {
                isValid = model.CheckUser(emailInput, passwordInput).Result;

                if (isValid == true)
                {
                    goTo.NavigateTo("");
                }
            }
            else empty = true;
        }
        else empty = true;

    }


}
